<html>
    <head>
    </head>
    <body>
            <script>
                const LOCATIONS = {
    DEN : true,
    KITCHEN: true
};

inputZone = document.createElement('div');
inputZone.style.position = 'sticky';
inputZone.style.top = "0px";
inputZone.style.padding = "5px";
inputZone.style.width = 'fit-content';
inputZone.style.backgroundColor = 'white';
document.body.appendChild(inputZone);

emojiZone = document.createElement('div');
emojiZone.style.position = 'sticky';
emojiZone.style.top = "0px";
emojiZone.style.padding = "5px";
emojiZone.style.width = 'fit-content';
emojiZone.style.backgroundColor = 'white';
document.body.appendChild(emojiZone);

input = document.createElement('input');
inputZone.appendChild(input);

outputZone = document.createElement('div');
document.body.appendChild(outputZone);

infoZone = document.createElement('div');
infoZone.style.position = 'absolute';
infoZone.style.top = '0px';
infoZone.style.right = '0px';
document.body.appendChild(infoZone);

scoreZone = document.createElement('div');
infoZone.appendChild(scoreZone);

emojiCommands = [
    ['ðŸˆ', 'PET CAT'],
    ['â˜•', 'DRINK COFFEE'],
    ['ðŸš¶', 'LEAVE HOME']
]

emojiCommands.forEach(([emoji, command]) => {
    emojiButton = document.createElement('button');
    emojiButton.textContent = emoji;
    emojiButton.addEventListener('click', () => handle(command));
    emojiButton.style.fontSize = '400%';
    emojiZone.appendChild(emojiButton);
})

let score = 0;

pepZone = document.createElement('div');
infoZone.appendChild(pepZone);

let pep = 0;

setScore = () => scoreZone.textContent = `score: ${score}`;
setScore();

setPep = () => pepZone.textContent = `pep: ${pep}`;
setPep();

initialPrompt = document.createElement('pre');
initialPrompt.textContent = `
WELCOME TO STAYHOME SIMULATOR 2019
DO WHAT YOU MUST
(case sensitive)`;
outputZone.appendChild(initialPrompt);

enterListener = (e) => {
    if(e.key == 'Enter') {
        const command = input.value;
        input.value = "";
        handle(command);
    }
};

getCatName = () => {
    const names = ['Captain Mittens', 'Professor Whiskers', 'Postdoc Scratcher', 'Bitey'];
    return names[Math.floor(Math.random() * names.length)];
}

handle = command => {
    output = document.createElement('pre');
    if(command == "LEAVE HOME") {
        if(score == 0) {
            output.textContent =
            `You cannot leave without petting ${getCatName()}`
        } else {
        output.textContent = 
`You bravely leave home, but soon learn there are no cats to pet, and naught but fresca to imbibe
=== YOU LOSE ===
final score: ${score}`;
    input.removeEventListener('keyup', enterListener);
        }

    } else if (command == "DRINK COFFEE") {
        pep += 1;
        output.textContent = 
`You sip, you exult, there is pep in your step
current pep: ${pep}
        `
    } else if (command == "PET CAT") {
        if(pep > 0) {
            pep -= 1;
            output.textContent = 
`Your caffeine heightened reflexes allow you
to chase down your loyal cat and initiate
ear scratch protocol
... SUCCESS!
SCORE += 10 POINTS`
            score += 10;
        } else {
            output.textContent = 
`Your feline friend eludes your grasp.
You feel groggy.`
        }
    } else {
        output.textContent = 
`unknown command: ${command}
COMMANDS UNDERSTOOD ARE
DRINK COFFEE
PET CAT
LEAVE HOME
`
    }


    output.textContent = command + '\n' + output.textContent;
    setScore();
    setPep();
    outputZone.prepend(output);
    document.body.scrollTop = 0;
}

input.addEventListener('keyup', enterListener)</script>
    </body>
</html>

